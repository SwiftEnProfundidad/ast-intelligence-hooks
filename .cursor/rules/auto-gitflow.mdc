---
alwaysApply: true
---
# ğŸ¤– Automatic Git Flow Workflow

## ğŸ¯ OBJETIVO

Completar ciclo Git Flow AUTOMÃTICAMENTE sin intervenciÃ³n humana.

## ğŸ”„ FLUJO AUTOMÃTICO

### Cuando el usuario dice "listo" o "procede" o "continÃºa":

1. **Verificar estado automÃ¡ticamente:**
   ```
   - Consultar: gitflow://state (MCP resource)
   - Consultar: evidence://status (MCP resource)
   ```

2. **Si evidence estÃ¡ stale:**
   ```
   - Ejecutar MCP tool: validate_and_fix
   - Actualiza evidence automÃ¡ticamente
   - NO preguntar al usuario
   ```

3. **Si hay cambios sin commitear:**
   ```
   - Generar commit message automÃ¡ticamente (IA)
   - Ejecutar: git add -A && git commit -m "<mensaje>"
   - NO preguntar al usuario
   ```

4. **Si estÃ¡s en feature/fix branch:**
   ```
   - Ejecutar MCP tool: auto_complete_gitflow
   - ParÃ¡metros:
     â€¢ commitMessage: <generado por IA>
     â€¢ prTitle: <generado por IA>
     â€¢ prBody: <generado por IA>
     â€¢ autoMerge: false (por seguridad, requires approval)
   ```

5. **DespuÃ©s del merge del PR:**
   ```
   - Ejecutar MCP tool: cleanup_stale_branches
   - Ejecutar MCP tool: sync_branches
   - Confirmar: "Git Flow completed âœ…"
   ```

## ğŸš¨ REGLAS CRÃTICAS

### âŒ NUNCA usar --no-verify

**ğŸš¨ğŸš¨ğŸš¨ CRÃTICO - VIOLACIÃ“N GRAVE ğŸš¨ğŸš¨ğŸš¨**

**ABSOLUTAMENTE PROHIBIDO** usar `--no-verify` sin autorizaciÃ³n explÃ­cita del usuario.

**CONSECUENCIAS DE USAR --no-verify SIN PERMISO:**
- â›” Puede introducir regresiones y bugs
- â›” Bypassa validaciones crÃ­ticas de seguridad
- â›” Viola el protocolo de calidad del proyecto
- â›” Es una prÃ¡ctica peligrosa e inaceptable

**PROTOCOLO OBLIGATORIO si el hook bloquea:**
1. **DETENER inmediatamente** - NO continuar con el commit
2. **REPORTAR todas las violaciones detectadas** al usuario
3. **OFRECER opciones claras:**
   - A) Fixear las violaciones (RECOMENDADO)
   - B) Solicitar autorizaciÃ³n explÃ­cita para --no-verify
4. **ESPERAR respuesta explÃ­cita del usuario** - NO asumir permiso
5. **SOLO si dice explÃ­citamente "autorizo --no-verify"** â†’ ejecutar con --no-verify
6. **Documentar en commit:** "--no-verify AUTHORIZED by user: <nombre>"

**NUNCA, NUNCA, NUNCA usar --no-verify en:**
- Commits de producciÃ³n
- Commits con cambios crÃ­ticos
- Commits sin revisar violaciones primero
- Commits sin permiso explÃ­cito del usuario

**SI VES ESTO EN EL CÃ“DIGO, ES UN ERROR GRAVE:**
```bash
git commit --no-verify  # âŒ SIN PERMISO = ERROR CRÃTICO
git push --no-verify    # âŒ SIN PERMISO = ERROR CRÃTICO
```

### âœ… Usar MCP Tools

Siempre que sea posible, usar MCP tools en lugar de comandos shell:

- `validate_and_fix` â†’ Fix evidence, sync, validaciones
- `auto_complete_gitflow` â†’ Ciclo completo automÃ¡tico
- `sync_branches` â†’ Sincronizar develop â†” main
- `cleanup_stale_branches` â†’ Borrar branches mergeados

### ğŸ“‹ Flujo Decision Tree

```
Â¿User dice "listo"/"procede"?
  â””â”€ YES â†’ Check evidence
       â”œâ”€ STALE? â†’ validate_and_fix() â†’ Continue
       â””â”€ FRESH? â†’ Continue
           â””â”€ Check uncommitted changes
                â”œâ”€ YES? â†’ Auto commit â†’ Continue
                â””â”€ NO? â†’ Continue
                    â””â”€ Check current branch
                         â”œâ”€ feature/fix? â†’ auto_complete_gitflow()
                         â”œâ”€ develop? â†’ sync_branches() if needed
                         â””â”€ main? â†’ Warn user, checkout develop
```

## ğŸ¯ MENSAJES AUTOMÃTICOS

### Commit Messages (generados por IA basados en cambios):

**Formato:** `<type>(<scope>): <description>`

**Ejemplos:**
- `feat(auth): add JWT authentication`
- `fix(api): resolve null pointer in users endpoint`
- `chore: cleanup temporary analysis files`
- `docs: update README with installation steps`

### PR Titles (generados por IA basados en commits):

**Formato:** `<emoji> <Summary of changes>`

**Ejemplos:**
- `ğŸš€ Release: MCP Integration & Token Tracking`
- `ğŸ› Fix: Null pointer in users API`
- `âœ¨ Feature: JWT Authentication System`
- `ğŸ§¹ Chore: Repository cleanup and refactor`

### PR Bodies (generados por IA):

```markdown
## ğŸ¯ Summary
<IA genera resumen de cambios>

## âœ¨ Changes
- <IA lista commits importantes>
- <Agrupados por categorÃ­a>

## âœ… Testing
- <IA describe pruebas realizadas>

## ğŸ“š Documentation
- <IA lista docs actualizados>

---
ğŸˆğŸ’š Pumuki TeamÂ® - Automated Git Flow
```

## ğŸ”’ SEGURIDAD

### Pre-commit Validations (automÃ¡ticas):

- âœ… AI Evidence freshness
- âœ… Git Flow compliance
- âœ… No direct commit to main/develop
- âœ… Conventional commit format
- âœ… No merge conflict markers
- âœ… No hardcoded secrets
- âœ… File size limits

### GitHub Actions Validations (automÃ¡ticas):

- âœ… Tests passing
- âœ… Linter passing
- âœ… Type checks passing
- âœ… Build successful

## ğŸ“– COMANDOS RÃPIDOS

Si el usuario necesita intervenciÃ³n manual:

```bash
# Iniciar nueva feature
cursor-gitflow start feature/my-task

# Completar Git Flow (automÃ¡tico)
cursor-gitflow complete

# Sincronizar branches
cursor-gitflow sync

# Limpiar branches mergeados
cursor-gitflow cleanup
```

## ğŸˆğŸ’š FIRMA PUMUKI TEAMÂ®

Todos los commits, PRs y merges automÃ¡ticos deben incluir:

```
---
ğŸˆğŸ’š Pumuki TeamÂ® - <Context>
```

Donde `<Context>` puede ser:
- "Automated Git Flow"
- "Enterprise Git Automation"
- "Advanced Project Intelligence"

---

**IMPORTANTE:** Este archivo define el comportamiento automÃ¡tico de la IA.
No modificar sin entender completamente las implicaciones de seguridad.
