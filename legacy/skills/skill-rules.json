{
    "version": "1.0",
    "description": "Skill activation triggers for Claude Code - RuralGO Project. Controls when skills automatically suggest or block actions.",
    "skills": {
        "skill-developer": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "Meta-skill for creating and managing Claude Code skills",
            "promptTriggers": {
                "keywords": [
                    "skill system",
                    "create skill",
                    "add skill",
                    "skill triggers",
                    "skill rules",
                    "hook system",
                    "skill development",
                    "skill-rules.json"
                ],
                "intentPatterns": [
                    "(how do|how does|explain).*?skill",
                    "(create|add|modify|build).*?skill",
                    "skill.*?(work|trigger|activate|system)"
                ]
            }
        },
        "backend-guidelines": {
            "type": "guardrail",
            "enforcement": "block",
            "priority": "high",
            "description": "NestJS/TypeScript backend development patterns with Clean Architecture",
            "promptTriggers": {
                "keywords": [
                    "backend",
                    "backend development",
                    "NestJS",
                    "controller",
                    "service",
                    "repository",
                    "use case",
                    "use-case",
                    "API",
                    "endpoint",
                    "guard",
                    "interceptor",
                    "pipe",
                    "validation",
                    "DTO",
                    "Supabase",
                    "PostgreSQL",
                    "database access",
                    "dependency injection",
                    "clean architecture"
                ],
                "intentPatterns": [
                    "(create|add|implement|build).*?(controller|service|repository|use.*?case|endpoint|API)",
                    "(fix|handle|debug).*?(error|exception|backend)",
                    "(add|implement).*?(guard|interceptor|pipe|validation|DTO)",
                    "(organize|structure|refactor).*?(backend|service|API|clean.*?architecture)",
                    "(how to|best practice).*?(backend|NestJS|controller|service|repository)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "apps/backend/src/**/*.ts"
                ],
                "pathExclusions": [
                    "**/*.test.ts",
                    "**/*.spec.ts",
                    "**/*.e2e-spec.ts"
                ],
                "contentPatterns": [
                    "@Controller",
                    "@Injectable",
                    "@Module",
                    "UseCase",
                    "UseCase",
                    "import.*@nestjs/common",
                    "import.*@nestjs/core",
                    "class.*Repository",
                    "interface.*Repository",
                    "PrismaService",
                    "SupabaseClient"
                ]
            },
            "blockMessage": "‚ö†Ô∏è BLOCKED - Backend Guidelines Required\n\nüìã REQUIRED ACTION:\n1. Use Skill tool: 'backend-guidelines'\n2. Review NestJS Clean Architecture patterns\n3. Verify Repository pattern (interfaces in domain/, implementations in infrastructure/)\n4. Check Use Cases pattern (application/use-cases/)\n5. Ensure DTOs validation (class-validator)\n6. Then retry this edit\n\nReason: Enforce Clean Architecture and NestJS best practices\nFile: {file_path}\n\nüí° TIP: Add '// @skip-validation' comment to skip future checks",
            "skipConditions": {
                "sessionSkillUsed": true,
                "fileMarkers": [
                    "@skip-validation"
                ],
                "envOverride": "SKIP_BACKEND_GUIDELINES"
            }
        },
        "frontend-guidelines": {
            "type": "guardrail",
            "enforcement": "block",
            "priority": "high",
            "description": "Next.js 15/React/TypeScript frontend development patterns",
            "promptTriggers": {
                "keywords": [
                    "component",
                    "react component",
                    "UI",
                    "interface",
                    "page",
                    "modal",
                    "dialog",
                    "form",
                    "frontend",
                    "React",
                    "Next.js",
                    "Next.js 15",
                    "Server Component",
                    "Client Component",
                    "use client",
                    "use server"
                ],
                "intentPatterns": [
                    "(create|add|make|build|update|modify|edit).*?(component|UI|page|modal|dialog|form)",
                    "(how to|best practice).*?(component|react|Next.js|frontend)",
                    "(style|design|layout).*?(component|UI)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "apps/admin-dashboard/src/**/*.tsx",
                    "apps/admin-dashboard/src/**/*.ts",
                    "apps/web-app/src/**/*.tsx",
                    "apps/web-app/src/**/*.ts"
                ],
                "pathExclusions": [
                    "**/*.test.tsx",
                    "**/*.test.ts",
                    "**/*.spec.tsx",
                    "**/*.spec.ts",
                    "**/*.styles.ts",
                    "**/next.config.ts",
                    "**/tsconfig.json"
                ],
                "contentPatterns": [
                    "useState",
                    "useEffect",
                    "useCallback",
                    "useMemo",
                    "zustand",
                    "react-query",
                    "@tanstack/react-query",
                    "next/router",
                    "next/navigation",
                    "use client",
                    "use server",
                    "export default function",
                    "export.*Component",
                    "from 'next/image'",
                    "from 'next/link'"
                ]
            },
            "blockMessage": "‚ö†Ô∏è BLOCKED - Frontend Guidelines Required\n\nüìã REQUIRED ACTION:\n1. Use Skill tool: 'frontend-guidelines'\n2. Review Next.js 15 patterns (Server Components by default, 'use client' only when needed)\n3. Check React/TypeScript best practices\n4. Verify Clean Architecture (domain/application/infrastructure/presentation)\n5. Use proper state management (Zustand for global, useState for local)\n6. Then retry this edit\n\nReason: Enforce Next.js 15 compatibility and React best practices\nFile: {file_path}\n\nüí° TIP: Add '// @skip-validation' comment to skip future checks",
            "skipConditions": {
                "sessionSkillUsed": true,
                "fileMarkers": [
                    "@skip-validation"
                ],
                "envOverride": "SKIP_FRONTEND_GUIDELINES"
            }
        },
        "ios-guidelines": {
            "type": "guardrail",
            "enforcement": "block",
            "priority": "high",
            "description": "iOS/Swift/SwiftUI development patterns with TCA Navigation and Clean Architecture",
            "promptTriggers": {
                "keywords": [
                    "iOS",
                    "Swift",
                    "SwiftUI",
                    "iOS development",
                    "View",
                    "ViewModel",
                    "TCA",
                    "navigation",
                    "StackState",
                    "navigation stack",
                    "composable architecture",
                    "Repository",
                    "Use Case"
                ],
                "intentPatterns": [
                    "(create|add|implement|build).*?(View|ViewModel|Repository|Use.*?Case)",
                    "(how to|best practice).*?(iOS|Swift|SwiftUI|TCA)",
                    "(navigate|navigation).*?(SwiftUI|TCA|StackState)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "apps/ios/**/*.swift"
                ],
                "pathExclusions": [
                    "**/*Tests.swift",
                    "**/*Test.swift"
                ],
                "contentPatterns": [
                    "struct .*: View",
                    "class .*ViewModel",
                    "@StateObject",
                    "@ObservedObject",
                    "@EnvironmentObject",
                    "import SwiftUI",
                    "import Combine",
                    "ObservableObject",
                    "protocol.*Repository",
                    "actor"
                ]
            },
            "blockMessage": "‚ö†Ô∏è BLOCKED - iOS Guidelines Required\n\nYou must use the 'ios-guidelines' skill before editing iOS/Swift code.\n\nThis ensures:\n- Clean Architecture compliance\n- SwiftUI best practices\n- Proper memory management\n- Testing requirements\n- Security standards\n\nUse the skill in Cursor to proceed.",
            "skipConditions": {
                "sessionSkillUsed": true,
                "fileMarkers": ["@skip-validation"],
                "envOverride": "SKIP_IOS_GUIDELINES"
            }
        },
        "android-guidelines": {
            "type": "guardrail",
            "enforcement": "block",
            "priority": "high",
            "description": "Android/Kotlin/Jetpack Compose development patterns with Clean Architecture",
            "promptTriggers": {
                "keywords": [
                    "Android",
                    "Kotlin",
                    "Compose",
                    "Jetpack Compose",
                    "Android development",
                    "Composable",
                    "ViewModel",
                    "Repository",
                    "Use Case",
                    "Hilt",
                    "StateFlow",
                    "Flow"
                ],
                "intentPatterns": [
                    "(create|add|implement|build).*?(Composable|ViewModel|Repository|Use.*?Case)",
                    "(how to|best practice).*?(Android|Kotlin|Compose)",
                    "(navigate|navigation).*?(Compose|Jetpack)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "apps/android/**/*.kt"
                ],
                "pathExclusions": [
                    "**/*Test.kt",
                    "**/*Tests.kt"
                ],
                "contentPatterns": [
                    "@Composable",
                    "class .*ViewModel",
                    "@HiltViewModel",
                    "@Inject",
                    "import androidx.compose",
                    "import androidx.lifecycle",
                    "StateFlow",
                    "Flow",
                    "suspend fun",
                    "viewModelScope",
                    "interface.*Repository"
                ]
            },
            "blockMessage": "‚ö†Ô∏è BLOCKED - Android Guidelines Required\n\nYou must use the 'android-guidelines' skill before editing Android/Kotlin code.\n\nThis ensures:\n- Clean Architecture compliance\n- Jetpack Compose best practices\n- Proper Coroutines/Flow usage\n- Testing requirements\n- Security standards\n\nUse the skill in Cursor to proceed.",
            "skipConditions": {
                "sessionSkillUsed": true,
                "fileMarkers": ["@skip-validation"],
                "envOverride": "SKIP_ANDROID_GUIDELINES"
            }
        },
        "error-tracking": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "Error tracking and performance monitoring patterns",
            "promptTriggers": {
                "keywords": [
                    "error handling",
                    "exception",
                    "sentry",
                    "error tracking",
                    "captureException",
                    "monitoring",
                    "performance tracking"
                ],
                "intentPatterns": [
                    "(add|create|implement|setup).*?(error handling|sentry|error tracking)",
                    "(fix|handle|catch).*?(error|exception)",
                    "(how to|best practice).*?(error|sentry|monitoring)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "**/*Controller.ts",
                    "**/*Service.ts",
                    "**/instrument.ts",
                    "**/sentry*.ts"
                ],
                "contentPatterns": [
                    "@sentry",
                    "Sentry\\.",
                    "captureException",
                    "captureMessage"
                ]
            }
        }
    },
    "notes": {
        "enforcement_types": {
            "suggest": "Skill suggestion appears but doesn't block execution",
            "block": "Requires skill to be used before proceeding (guardrail)",
            "warn": "Shows warning but allows proceeding"
        },
        "priority_levels": {
            "critical": "Highest - Always trigger when matched",
            "high": "Important - Trigger for most matches",
            "medium": "Moderate - Trigger for clear matches",
            "low": "Optional - Trigger only for explicit matches"
        },
        "customization": {
            "pathPatterns": "Adjusted to match RuralGO project structure (apps/backend, apps/admin-dashboard, apps/ios, apps/android)",
            "keywords": "Domain-specific terms for NestJS, Next.js 15, SwiftUI/TCA, Jetpack Compose",
            "intentPatterns": "Regex patterns for flexible user intent matching"
        }
    }
}
