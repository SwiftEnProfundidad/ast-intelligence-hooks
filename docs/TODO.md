# Framework Work Tracking (TODO)

## Scope

Operational tracking for active **Pumuki AST Intelligence Framework v2.x** work.

## Completed Milestones

- Deterministic v2.x architecture is active: `Facts -> Rules -> Gate -> ai_evidence v2.1`.
- Multi-platform stage runners are implemented (iOS, backend, frontend, android).
- Skills lock/policy enforcement is integrated with stage-aware gate calibration.
- Evidence/mcp deterministic validation suites are in place and green.
- IDE adapter hook-runtime hardening and diagnostics commands are implemented (current baseline: Adapter).
- Consumer CI diagnostic tooling is implemented (artifact scan, auth check, support bundle, ticket draft).
- Consumer startup-failure unblock status helper is implemented (`validation:consumer-startup-unblock-status`).
- Consumer startup triage orchestrator is implemented (`validation:consumer-startup-triage`).
- Phase 5 blockers readiness helper is implemented (`validation:phase5-blockers-readiness`).
- Phase 5 execution closure status helper is implemented (`validation:phase5-execution-closure-status`).
- Phase 5 execution closure one-shot orchestrator is implemented (`validation:phase5-execution-closure`).
- Framework menu exposes Phase 5 one-shot orchestration action (`Run phase5 execution closure (one-shot orchestration)`).
- Framework menu exposes external handoff report generation (`Build phase5 external handoff report`).
- Adapter readiness helper is implemented (`validation:adapter-readiness`).
- Adapter real-session report generator is implemented (`validation:adapter-real-session-report`, current baseline naming).
- iOS AST heuristic coverage includes force-cast (`as!`) detection with stage-aware severity promotion.
- Framework menu operational checks include docs hygiene and skills lock freshness (`skills:lock:check`).
- IDE-agnostic boundary guardrail test is implemented for `core/*` and `integrations/*`.
- Rule-pack version-to-doc sync guardrail test is implemented (`scripts/__tests__/rule-pack-docs-sync.test.ts`).
- Active enterprise docs IDE/provider-agnostic guardrail test is implemented (`scripts/__tests__/enterprise-docs-agnostic.test.ts`).
- Active enterprise docs English-only guardrail test is implemented (`scripts/__tests__/enterprise-docs-language.test.ts`).
- Active docs index coverage guardrail test is implemented (`scripts/__tests__/docs-index-coverage.test.ts`).
- Active docs markdown reference-integrity guardrail test is implemented (`scripts/__tests__/docs-markdown-reference-integrity.test.ts`).
- Root markdown baseline guardrail is implemented (`scripts/__tests__/root-docs-baseline.test.ts`).
- Legacy provider-named hook scripts are preserved as compatibility aliases mapped to adapter-native scripts (`scripts/__tests__/adapter-script-aliases.test.ts`).
- Legacy ruleset lookup is provider-agnostic and covered by regression tests (`integrations/git/resolveLegacyRulesetFile.ts`, `integrations/git/__tests__/resolveLegacyRulesetFile.test.ts`).
- MCP read-only evidence context API now includes deterministic `summary`, `rulesets`, and `platforms` endpoints (`integrations/mcp/evidenceContextServer.ts`).
- Formal cross-agent MCP context consumption pattern is documented (`docs/MCP_AGENT_CONTEXT_CONSUMPTION.md`).
- Validation artifact cleanup command is available (`validation:clean-artifacts`, dry-run supported).
- Framework menu includes artifact cleanup action (`Clean local validation artifacts`).
- Phase 5 one-shot flow includes auth preflight fail-fast with optional bypass (`--skip-auth-preflight`).
- Documentation baseline is normalized to enterprise English and active v2.x behavior.
- Root `CHANGELOG.md` is normalized to active enterprise v2 baseline.
- Package manifest guardrail logic is reusable and regression-tested in stage gates (`scripts/package-manifest-lib.ts`, `scripts/__tests__/package-manifest-lib.test.ts`).
- Package smoke CI matrix (`block` + `minimal`) is active and green with evidence v2.1 assertions.
- Framework menu consumer diagnostics defaults are host-agnostic:
  - no hardcoded local repository paths
  - optional environment default via `PUMUKI_CONSUMER_REPO_PATH`
- Adapter validation runbooks are provider-neutral (no provider-specific hooks path assumptions).
- Mock consumer integration runbook is versioned and indexed (`docs/validation/mock-consumer-integration-runbook.md`).
- External rollout execution pack is published (`docs/validation/phase8-external-rollout-pack.md`).
- Phase 5 one-shot closure supports local mock-consumer mode (`--mock-consumer`) with deterministic A/B + triage/unblock generation from package-smoke summaries.
- Mock consumer A/B deterministic report is implemented (`validation:mock-consumer-ab-report`).
- Framework menu exposes mock consumer A/B report generation as a first-class action.
- Phase5 mock-closure CI workflow is active (`.github/workflows/pumuki-phase5-mock.yml`).
- Phase 5 mock-consumer closure execution is validated with READY outputs:
  - `.audit-reports/phase5/phase5-blockers-readiness.md`
  - `.audit-reports/phase5/phase5-execution-closure-status.md`
  - `.audit-reports/phase5/phase5-execution-closure-run-report.md`

For full historical execution details, see:

- `docs/RELEASE_NOTES.md`
- `docs/validation/archive/`

## Active Work

- [x] MCP context endpoint `/ai-evidence/platforms` now supports deterministic pagination (`limit`, `offset`, `maxLimit=100`) with regression coverage and docs alignment.
- [x] MCP `/status` now exports deterministic pagination bounds for paginated endpoints (`context_api.pagination_bounds`).
- [x] MCP context endpoint `/ai-evidence/ledger` now supports deterministic pagination (`limit`, `offset`, `maxLimit=100`) alongside time-window filters.
- [x] MCP paginated endpoints now expose deterministic `pagination.has_more` for stable page iteration.
- [x] MCP context summary/status now expose deterministic `severity_counts` for pre-action prioritization.
- [x] MCP context summary/status now expose deterministic `rulesets_by_platform` for policy coverage visibility.
- [x] MCP context summary/status now expose deterministic `findings_by_platform` for platform-priority visibility.
- [x] MCP context summary/status now expose deterministic `highest_severity` for fast gate-priority checks.
- [x] MCP context summary/status now expose deterministic `ledger_by_platform` for recurring-violation visibility.
- [x] MCP context summary/status now expose deterministic `has_findings` for fast non-empty gate checks.
- [x] MCP context summary/status now expose deterministic `detected_platforms_count` for quick active-platform triage.
- [x] MCP context summary/status now expose deterministic `blocking_findings_count` (CRITICAL+ERROR) for fast block-level triage.
- [x] MCP context summary/status now expose deterministic `rulesets_fingerprint` for quick ruleset-signature comparisons.
- [x] MCP context summary/status now expose deterministic `non_detected_platforms_count` for quick inactive-platform triage.
- [x] MCP context summary/status now expose deterministic `tracked_platforms_count` for quick total-platform triage.
- [x] MCP context summary/status now expose deterministic `suppressed_findings_count` for quick suppression-aware triage.
- [x] MCP context summary/status now expose deterministic `platform_confidence_counts` for confidence-distribution triage.
- [x] MCP context summary/status now expose deterministic `findings_files_count` for per-file impact triage.
- [x] MCP context summary/status now expose deterministic `findings_with_lines_count` for location-precision triage.
- [x] MCP context summary/status now expose deterministic `findings_without_lines_count` for line-metadata gap triage.
- [x] MCP context summary/status now expose deterministic `ledger_files_count` for recurring file-impact triage.
- [x] MCP context summary/status now expose deterministic `rulesets_bundles_count` for bundle-coverage triage.
- [x] MCP context summary/status now expose deterministic `findings_rules_count` for rule-surface triage.
- [x] MCP context summary/status now expose deterministic `rulesets_platforms_count` for platform-coverage triage.
- [x] MCP context summary/status now expose deterministic `ledger_rules_count` for recurring-rule triage.
- [x] MCP context summary/status now expose deterministic `rulesets_hashes_count` for hash-signature triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rules_count` for suppression-replacement triage.
- [x] MCP context summary/status now expose deterministic `suppressed_platforms_count` for suppression-platform triage.
- [x] MCP context summary/status now expose deterministic `suppressed_files_count` for suppression-file triage.
- [x] MCP context summary/status now expose deterministic `suppressed_rules_count` for suppression-rule triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reasons_count` for suppression-reason triage.
- [x] MCP context summary/status now expose deterministic `suppressed_with_replacement_count` for replacement-aware suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_without_replacement_count` for non-replacement suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_rule_file_pairs_count` for suppression surface triage by rule/file pair.
- [x] MCP context summary/status now expose deterministic `suppressed_reasons_with_replacement_count` for replacement-reason suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reasons_without_replacement_count` for non-replacement reason suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_platform_rule_pairs_count` for platform-rule suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_platform_file_pairs_count` for platform-file suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_file_pairs_count` for replacement-rule file suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_platform_pairs_count` for replacement-rule platform suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_platforms_count` for replacement-only platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_platforms_count` for non-replacement-only platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_reason_file_pairs_count` for non-replacement reason/file suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_rule_file_pairs_count` for non-replacement rule/file suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_rule_platform_pairs_count` for non-replacement rule/platform suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_reasons_count` for non-replacement reason-distribution suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_reason_file_pairs_count` for replacement reason/file suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_reason_pairs_count` for replacement rule/reason suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_ids_count` for replacement-rule cardinality suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_reasons_count` for replacement reason-distribution suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_file_platform_triples_count` for replacement rule/file/platform suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_rule_file_platform_triples_count` for non-replacement rule/file/platform suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_rule_file_triples_count` for reason/rule/file suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_rule_platform_triples_count` for reason/rule/platform suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_file_platform_triples_count` for reason/file/platform suppression surface triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_platform_pairs_count` for reason/platform suppression pair triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_file_pairs_count` for reason/file suppression pair triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_reason_platform_pairs_count` for replacement reason/platform suppression pair triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_reason_platform_pairs_count` for non-replacement reason/platform suppression pair triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_reason_rule_file_triples_count` for replacement reason/rule/file suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_reason_rule_file_triples_count` for non-replacement reason/rule/file suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_reason_rule_platform_triples_count` for replacement reason/rule/platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_reason_rule_platform_triples_count` for non-replacement reason/rule/platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_rule_file_platform_quadruples_count` for reason/rule/file/platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_reason_rule_file_platform_quadruples_count` for replacement reason/rule/file/platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_reason_rule_file_platform_quadruples_count` for non-replacement reason/rule/file/platform suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_rule_file_platform_replacement_split_count` for replacement-vs-non-replacement suppression split triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_split_modes_count` for replacement-mode suppression split triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_split_mode_replacement_count` for replacement-mode replacement bucket triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_split_mode_non_replacement_count` for replacement-mode non-replacement bucket triage.
- [x] MCP context summary/status now expose deterministic `suppressed_reason_rule_file_platform_replacement_dual_mode_count` for replacement dual-mode suppression triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_file_platform_distinct_count` for replacement rule/file/platform distinct triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_rule_file_platform_distinct_count` for non-replacement rule/file/platform distinct triage.
- [x] MCP context summary/status now expose deterministic `suppressed_rule_file_platform_distinct_total_count` for total rule/file/platform distinct triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_file_platform_share_of_total_pct` for replacement rule/file/platform share triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_rule_file_platform_share_of_total_pct` for non-replacement rule/file/platform share triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_vs_non_replacement_share_gap_pct` for replacement-vs-non-replacement share-delta triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_rule_file_platform_dominance_pct` for replacement-share dominance triage.
- [x] MCP context summary/status now expose deterministic `suppressed_replacement_minus_non_replacement_share_signed_pct` for signed share-delta triage.
- [x] MCP context summary/status now expose deterministic `suppressed_non_replacement_rule_file_platform_dominance_pct` for non-replacement-share dominance triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_polarization_index_pct` for suppression-share polarization triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_balance_score_pct` for suppression-share balance triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_imbalance_index_pct` for suppression-share imbalance triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_polarization_balance_gap_pct` for polarization-vs-balance gap triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_net_polarity_pct` for net replacement-vs-non-replacement polarity triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction` for suppression-share direction triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_confidence` for suppression-share direction confidence triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_strength_bucket` for suppression-share direction strength triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_strength_rank` for suppression-share direction rank triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_is_balanced` for suppression-share balanced state triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_label` for suppression-share direction label triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_code` for suppression-share direction code triage.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_triage_hint` for suppression-share direction triage guidance.
- [x] MCP context summary/status now expose deterministic `suppressed_share_direction_priority_score` for suppression-share direction priority scoring.
- [x] MCP context summary/status now expose deterministic `suppressed_share_triage_summary` for suppression-share triage summary rollup.
- [ ] MCP context summary/status now expose deterministic `suppressed_share_triage_digest` for suppression-share triage digest rollup.
- [x] Real external pre/post tool runtime validation rerun and adapter readiness regeneration.
  - Runtime wiring refreshed and validated:
    - `npm run install:adapter-hooks-config` => PASS
    - `npm run verify:adapter-hooks-runtime` => PASS (`node_bin=/opt/homebrew/bin/node`)
  - Local hook simulation validated:
    - `bash legacy/scripts/hooks-system/infrastructure/cascade-hooks/validate-local-runtime.sh` => PASS
    - `npm run assess:adapter-hooks-session:any` => PASS
    - `npm run assess:adapter-hooks-session` => PASS
  - Non-simulated runtime event capture validated:
    - manual pre/post invocation via `run-hook-with-node.sh` and repo path payload (`integrations/git/index.ts`) => PASS
  - Local baseline regenerated:
    - `.audit-reports/adapter/adapter-session-status.md` (verdict: PASS)
    - `.audit-reports/adapter/adapter-real-session-report.md`
    - `.audit-reports/adapter/adapter-readiness.md` (verdict: READY)
  - Regression batch completed after MCP context expansion:
    - `npm run test:mcp` => PASS
    - `npm run test:deterministic` => PASS
- [x] Consumer private-repo Actions startup-failure unblock package and escalation prep:
  - Current live signals (`.audit-reports/phase5-latest/*`):
    - `startup_failure_runs: 0`
    - `startup_stalled_runs: 8`
    - `oldest_queued_run_age_minutes: 32`
    - latest probe: `21944339604` (`queued`, `jobs=0`, `artifacts=0`)
    - cancel attempts on queued runs return `HTTP 500`
  - Escalation handoff is ready in repo:
    - `docs/validation/consumer-startup-escalation-handoff-latest.md`
  - Packaged attachment bundle (ready to share):
    - `.audit-reports/phase5-latest/consumer-startup-escalation-bundle-latest.tgz`
    - `sha256: 00fbaa5952e3ca32bf6f3e546b76895aa550cc99f4500fadd7e970803420cc0c`
  - External handoff state:
    - root cause identified: billing for GitHub Actions is currently inactive/unavailable in consumer account.
    - external retries are intentionally paused; resume only after billing reactivation.
    - resume runbook after billing activation: `docs/validation/phase8-post-billing-reactivation-runbook.md`.
    - pre-submission verification executed (`PASS`, `2026-02-11T09:54:18Z`).
    - submission sent to GitHub Support: ticket `4077449`, submitted by `SwiftEnProfundidad` at `2026-02-11T13:54:02Z`.
    - follow-up ETA registered: `2026-02-12 18:00 UTC`.
    - user will close support ticket manually because billing cause is known.
    - automated CLI submission path is not available (`gh support` command does not exist).
    - direct REST submission probes also fail with `404 Not Found` (`/support/tickets`, `/user/support/tickets`).
    - follow checklist in `docs/validation/consumer-startup-escalation-handoff-latest.md` (`Manual Portal Submission Checklist`) to avoid missing fields/attachments.
    - payload export helper: `npm run validation:phase5-escalation:payload -- .audit-reports/phase5-latest`.
    - deterministic pre-submit gate: `npm run validation:phase5-escalation:ready-to-submit -- .audit-reports/phase5-latest`.
    - one-shot pre-submit package helper: `npm run validation:phase5-escalation:prepare -- .audit-reports/phase5-latest`.
    - latest one-shot preparation run result: `READY PACKAGE` (payload + bundle ready).
    - latest deterministic pre-submit gate run: `READY TO SUBMIT` (checksum + attachments aligned).
    - optional close helper after submission: `npm run validation:phase5-escalation:close-submission -- <ticket_id> <submitted_by> "<follow_up_eta>" [submitted_at_utc]`.
    - post-submit tracking can be updated with: `npm run validation:phase5-escalation:mark-submitted -- <ticket_id> <submitted_by> "<follow_up_eta>" [submitted_at_utc]`.
    - post-support fast close check (resume only after billing reactivation): `npm run validation:phase5-post-support:refresh -- SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5-latest .audit-reports/phase5/mock-consumer-ab-report.md`.
    - one-shot resume helper after billing reactivation: `npm run validation:phase8:resume-after-billing -- SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5-latest .audit-reports/phase5/mock-consumer-ab-report.md`.
    - next-step status helper (prints deterministic next command): `npm run validation:phase8:next-step -- .audit-reports/phase5-latest SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5/mock-consumer-ab-report.md`.
    - doctor helper (signals + next command): `npm run validation:phase8:doctor -- .audit-reports/phase5-latest SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5/mock-consumer-ab-report.md`.
    - autopilot helper (doctor + conditional close-ready): `npm run validation:phase8:autopilot -- .audit-reports/phase5-latest SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5/mock-consumer-ab-report.md`.
    - status pack helper (progress guardrail + doctor): `npm run validation:phase8:status-pack -- .audit-reports/phase5-latest SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5/mock-consumer-ab-report.md`.
    - tick helper (refresh + status-pack): `npm run validation:phase8:tick -- SwiftEnProfundidad/pumuki-actions-healthcheck-temp 8 .audit-reports/phase5-latest .audit-reports/phase5/mock-consumer-ab-report.md`.
    - ready handoff summary helper (run only when chain is READY): `npm run validation:phase8:ready-handoff -- .audit-reports/phase5-latest`.
    - close-ready package helper (run only when chain is READY): `npm run validation:phase8:close-ready -- .audit-reports/phase5-latest`.
    - once sent, record `support_ticket_id/submitted_at_utc/submitted_by` in `docs/validation/consumer-startup-escalation-handoff-latest.md`.
    - after support response + refresh, run `npm run validation:phase5-latest:ready-check` (must return `0`) before marking Phase 8 closed.
- [ ] Local-only refactor continuation [ACTIVE]:
  - âœ… Added TypeScript `debugger` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `console.error` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `eval` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `Function` constructor semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `setTimeout(string)` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `setInterval(string)` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `new Promise(async executor)` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `with` statement semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `process.exit` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `delete` operator semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `innerHTML` assignment semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `document.write` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `insertAdjacentHTML` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `child_process` import/require semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `process.env` mutation semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.writeFileSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `execSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `exec` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `spawnSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `spawn` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fork` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `execFileSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.appendFileSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `execFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.writeFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.appendFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.rm` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.unlink` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.readFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.readdir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.mkdir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.stat` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.copyFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.rename` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.access` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.chmod` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.chown` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.utimes` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.lstat` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.realpath` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.symlink` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.link` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.readlink` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.open` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.opendir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.cp` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript `fs.promises.mkdtemp` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.utimes` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.watch` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.watchFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.unwatchFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.readFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.writeFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.appendFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.readdir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.mkdir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.rmdir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.rm` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.rename` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.copyFile` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.stat` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.lstat` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.realpath` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.access` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.chmod` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.chown` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.unlink` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.readlink` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.symlink` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.link` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.mkdtemp` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.opendir` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.open` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.cp` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.close` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.read` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.write` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.fsync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.fdatasync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.ftruncate` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.futimes` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.lutimes` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.fchown` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.fchmod` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.fstat` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.readv` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.writev` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.exists` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.truncate` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.statfs` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.lchown` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript callback-style `fs.lchmod` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.rmSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.mkdirSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.readdirSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.readFileSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.statSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.realpathSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.lstatSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.existsSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.chmodSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.chownSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.fchownSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.fchmodSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.fstatSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.ftruncateSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.futimesSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.lutimesSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.readvSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.writevSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.writeSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.fsyncSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.fdatasyncSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.closeSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.readSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.readlinkSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.symlinkSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.linkSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.cpSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.openSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.opendirSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.mkdtempSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.statfsSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.accessSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.utimesSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.renameSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.copyFileSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.unlinkSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.truncateSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript sync-style `fs.rmdirSync` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript hardcoded-secret token pattern semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript weak-crypto hash pattern semantic heuristic (`md5`/`sha1`) with stage-aware promotion and passing tests.
  - âœ… Added TypeScript insecure token generation via `Math.random` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript insecure token generation via `Date.now` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript unsafe buffer allocation via `Buffer.allocUnsafe` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript unsafe buffer allocation via `Buffer.allocUnsafeSlow` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript weak UUID/token generation via `crypto.randomUUID()` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript JWT decode without signature verification semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript JWT verify with `ignoreExpiration: true` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript JWT sign without expiration semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript TLS disabled via `rejectUnauthorized: false` semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript dynamic shell command invocation semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript insecure TLS env override via NODE_TLS_REJECT_UNAUTHORIZED=0 semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript child_process spawn/exec shell:true semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript vm dynamic code execution (runInNewContext/runInThisContext) semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added TypeScript command injection risk via child_process execFile with untrusted args semantic heuristic with stage-aware promotion and passing tests.
  - âœ… Added MCP/context API deterministic `ledger` endpoint with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic `snapshot` endpoint with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic `findings` endpoint with `severity`/`ruleId`/`platform` filters, test coverage, and docs alignment.
  - âœ… Added MCP/context API deterministic `rulesets` filter semantics (`platform`/`bundle`) with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic `platforms` confidence filter semantics with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic `ledger` age filter semantics (`lastSeenAfter`/`lastSeenBefore`) with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic `status` enrichment with endpoint/filter capability metadata and test coverage.
  - âœ… Added MCP/context API deterministic pagination for `findings` endpoint (`limit`/`offset`) with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic pagination bounds (`maxLimit=100`) for `findings` with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic pagination for `rulesets` (`limit`/`offset`, `maxLimit=100`) with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic pagination for `platforms` (`limit`/`offset`, `maxLimit=100`) with test coverage and docs alignment.
  - âœ… Added MCP/context API deterministic pagination for `ledger` (`limit`/`offset`, `maxLimit=100`) with test coverage and docs alignment.
  - âœ… Added MCP/context API paginated `has_more` metadata (`findings`, `rulesets`, `platforms`, `ledger`) with test coverage and docs alignment.
  - âœ… Finalized MCP context contract documentation snippets for agent consumption (`status.pagination_bounds` + paginated payload metadata).
  - âœ… Added deterministic `severity_counts` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `rulesets_by_platform` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `findings_by_platform` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `highest_severity` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `ledger_by_platform` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `has_findings` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `detected_platforms_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `blocking_findings_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `rulesets_fingerprint` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `non_detected_platforms_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `tracked_platforms_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `suppressed_findings_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `platform_confidence_counts` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `findings_files_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `findings_with_lines_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `findings_without_lines_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `ledger_files_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `rulesets_bundles_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `findings_rules_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `rulesets_platforms_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `ledger_rules_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `rulesets_hashes_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `suppressed_replacement_rules_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `suppressed_platforms_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `suppressed_files_count` to MCP summary/status contracts with test/docs alignment.
  - âœ… Added deterministic `suppressed_rules_count` to MCP summary/status contracts with test/docs alignment.
  - ðŸš§ Continue MCP context incremental expansion with next deterministic summary facets.
  - Keep deterministic regressions green after each batch (`npm run test:deterministic` + targeted suites).
- [x] Phase 5 execution closure (external consumer diagnostics dependency):
  - One-shot closure re-run completed in mock-consumer mode:
    - `npm run validation:phase5-execution-closure -- --repo SwiftEnProfundidad/ast-intelligence-hooks --out-dir .audit-reports/phase5 --mock-consumer --require-adapter-readiness`
  - READY artifacts regenerated:
    - `.audit-reports/phase5/phase5-blockers-readiness.md` (`verdict: READY`)
    - `.audit-reports/phase5/phase5-execution-closure-status.md` (`verdict: READY`)
    - `.audit-reports/phase5/phase5-external-handoff.md` (`verdict: READY`)
  - Remaining externalization step:
    - Attach external artifact URLs to rollout status notes when consumer run IDs are available.
- [ ] Documentation hygiene maintenance:
  - Keep only runbooks/guides versioned under `docs/validation/` root.
  - Keep generated reports out of baseline docs and regenerate on demand.
  - Guardrail command: `npm run validation:progress-single-active` (enforces exactly one `ðŸš§` in `docs/REFRACTOR_PROGRESS.md`).

## Deferred Adapter Validation

- [ ] Adapter pre/post tool hooks dedicated external IDE replay evidence (optional):
  - Runtime/readiness are currently green (`adapter-session-status: PASS`, `adapter-readiness: READY`).
  - Optional follow-up: capture a dedicated IDE-originated trace bundle for external audit traceability.

## Skills Enforcement Roadmap (Status)

### Goal

Ensure user/team skills are enforced deterministically in repository scope, without coupling audits to `~/.codex`.

### Guardrails

- Keep enforcement inputs versioned in repository scope.
- Keep `core/*` pure; implement loading/adaptation in `integrations/*`.
- Do not read `~/.codex/**` during CI gate execution.
- Trace every applied skills bundle in `.ai_evidence.json` (`rulesets[]`).

### Phase Status

- [x] Phase 1: contracts + validators + deterministic hash tests.
- [x] Phase 2: compiler + templates + deterministic fixtures + stale check.
- [x] Phase 3: gate integration + baseline lock semantics + evidence trace.
- [x] Phase 4: stage calibration + promotion policy tests + regressions.
- [x] Phase 5 docs: maintainers guide + migration + CI lock freshness check.
- [ ] Phase 5 execution closure: resolve consumer private Actions blocker and attach artifact URLs to rollout status.
  - Runbook: `docs/validation/phase5-execution-closure.md`
